<?php
/**
 *
 * Cadastro de vinculo serс feito por dois usuarios diferetnes.
 * Administraчуo ou Guiche. Com suas particularidades.
 *
 * A seguir o cadastro de vinculo pelo usuario administrador.
 *
 * 1- Verificaчуo de Id de usuario de base externa.
 * Esse usuario existe na base local? Captura-se o Id da base local para: $idUsuarioBaseLocal;
 * Nуo existe na base local: Cadastra-se e captura-se o id da base local para: $idUsuarioBaseLocal;
 *
 *
 *
 *
 * 2- Verificaчуo de cartуo.
 *
 *
 *
 *
 * 3 - Verificaчуo de vinculos do usuario.
 *
 *
 *
 * 4 - Verificaчуo de vinculos do Cartуo.
 *
 *
 *
 * 5 - Adicionar vinculo.
 *
 *
 *
 */
class VinculoDAO extends DAO {
	
	
	public function adicionaVinculo($idUsuarioBaseExterna, $numeroCartao, $dataDeValidade) {
		
		$idUsuarioBaseExterna = intval ( $idUsuarioBaseExterna );
		$result = $this->getConexao()->query("SELECT * FROM usuario WHERE id_base_externa = $idUsuarioBaseExterna");
		foreach ($result as $linha){
			echo 'Usuario Existe na base local';
			return;
		}
		echo 'Usuario Nao existe na base local';
		$numeroCartao = intval ( $numeroCartao);
		$result = $this->getConexao()->query("SELECT * FROM cartao WHERE cart_numero = $numeroCartao");
		foreach ($result as $linha){
			echo 'Cartao Existe na base local';
			return;
		}
		echo 'Cartao Nao existe na base local';
		
	}
	
	/**
	 * Verifica usuario na base local pelo id da base externa. 
	 * Adiciona na base local e retorna o ID da base local. 
	 * 
	 */
	public function verificarUsuario($idBaseExterna){
		
		return 10;
		
	}
	
	
}

?>